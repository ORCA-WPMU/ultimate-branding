/*! Ultimate Branding - v1.9.5.1
 * https://premium.wpmudev.org/project/ultimate-branding/
 * Copyright (c) 2018; * Licensed GPLv2+ */

jQuery(window.document).ready(function(e){"use strict";e(".ub_color_picker").wpColorPicker(),e(".ub_css_editor").each(function(){var t=ace.edit(this.id);e(this).data("editor",t),t.setTheme("ace/theme/monokai"),t.getSession().setMode("ace/mode/css"),t.getSession().setUseWrapMode(!0),t.getSession().setUseWrapMode(!1)}),e(".ub_css_editor").each(function(){var t=this,i=e(e(this).data("input"));e(this).data("editor").getSession().on("change",function(){i.val(e(t).data("editor").getSession().getValue())})})}),jQuery(window.document).ready(function(e){"use strict";e.fn.datepicker&&e(".simple-option input.datepicker").each(function(){e(this).datepicker({altFormat:"yy-mm-dd",altField:"#"+e(this).data("alt")})})}),jQuery(window.document).ready(function(){jQuery("form.tab-export-import #simple_options_import_file").on("change",function(e){var t=jQuery("form.tab-export-import #simple_options_import_button");""===jQuery(this).val()?t.attr("disabled"):/json$/i.test(jQuery(this).val())&&t.removeAttr("disabled")})}),jQuery(window.document).ready(function(e){"use strict";var t=e("#ub_main_site_favicon"),i=e("#wp_favicon"),n=e("#wp_favicon_id"),a=e("#wp_favicon_size"),o=e("#wp_login_image"),s=e("#wp_login_image_el"),r=e("#wp_login_image_id"),c=e("#wp_login_image_size"),u=e("#wp_login_image_width"),d=e("#wp_login_image_height"),l=e("#wp_login_image_width_wrap"),p=e("#wp_login_image_height_wrap");o.on("paste",function(t){o.unbind("change"),o.on("change",function(){var t=e(this),i=new window.Image,n=e(i),a=e(".spinner").first().clone();""!==e.trim(t.val())&&(s.prop("src",this.value),r.val(""),c.val(""),u.val(""),d.val("")),i.src=this.value,n.appendTo("body").hide(),s.after(a),a.show(),p.after(a),i.onload=function(){a.remove(),l.show(),p.show(),d.prop("type","number").val(this.height),u.prop("type","number").val(this.width),s.css({height:this.height,width:this.width})}})}),d.on("change",function(){s.css("height",this.value)}),u.on("change",function(){s.css("width",this.value)}),e("#wp_login_image_button").click(function(){return wp.media.editor.send.attachment=function(e,t){var i=e.size&&t.sizes[e.size]?t.sizes[e.size].url:t.url;o.val(i),s.prop("src",i),r.val(t.id),c.val(e.size),p.hide(),l.hide(),d.prop("type","hidden"),u.prop("type","hidden"),s.css({height:"auto",width:"auto"});var n=!!e.size&&t.sizes[e.size];void 0!==n&&!1!==n?(u.val(n.width),d.val(n.height)):(u.val(""),d.val(""))},wp.media.string.props=function(t,i){var n=e(".spinner").first().clone(),a=new window.Image,o=e(a),s=e("#wp_login_image_el"),r=e("#wp_login_image");return o.appendTo("body").hide(),a.src=t.url,s.find(".spinner").length||s.before(n.show()),s.hide(),o.on("load",function(){n.remove(),o.remove(),s.prop("src",t.url).show()}),r.val(t.url),t},wp.media.editor.open(),!1}),e("#wp_favicon_button").click(function(e){e.preventDefault(),wp.media.editor.send.attachment=function(e,o){t.prop("src",o.url),i.val(o.url),n.val(o.id),a.val(e.size)},wp.media.editor.open()}),e("#wp_favicon").on("change",function(o){t.prop("src",e(this).val()),i.val(e(this).val()),n.val(""),a.val("full")}),e(window.document).on("click",".ub_favicons_browse",function(t){t.preventDefault();var i=e(this).closest("tr"),n=i.find(".ub_favicons_fav_url"),a=i.find(".ub_favicons_fav_id"),o=i.find(".ub_favicons_fav_size"),s=i.find(".ub_favicons_fav");wp.media.editor.send.attachment=function(e,t){s.prop("src",t.url),n.val(t.url),a.val(t.id),o.val(e.size)},wp.media.string.props=function(t,i){var a=e(".spinner").first().clone(),o=new window.Image,r=e(o);return r.appendTo("body").hide(),o.src=t.url,s.find(".spinner").length||s.before(a.show()),s.hide(),r.on("load",function(){a.remove(),r.remove(),s.prop("src",t.url).show()}),n.val(t.url),t},wp.media.editor.open()}),e(".ub_favicons_fav_url").on("change",function(t){var i=e(this).closest("tr"),n=i.find(".ub_favicons_fav_id"),a=i.find(".ub_favicons_fav_size"),o=i.find(".ub_favicons_fav"),s=e(this).val();s.length<3&&(s=o.data("default")),o.prop("src",s),n.val(""),a.val("full")}),e(window.document).on("click",".ub_favicons_save",function(t){var i=e(this).closest("tr"),n=i.find("input"),a=i.find(".spinner"),o={action:"ub_save_favicon"};n.each(function(){var t=e(this);o[this.name]=t.val()}),t.preventDefault(),a.show(),e.ajax({url:ajaxurl,type:"post",data:o,complete:function(){a.hide()},success:function(){},error:function(){}})}),e(window.document).on("click",".ub_favicons_reset",function(t){var i=e(this),n=i.closest("tr"),a=n.find(".ub_favicons_fav"),o=n.find(".ub_favicons_fav_url"),s=n.find(".spinner"),r=i.data("id"),c={action:"ub_reset_favicon",id:r,nonce:e("#ub_favicons_"+r+"_reset").val()};t.preventDefault(),s.show(),e.ajax({url:ajaxurl,type:"post",data:c,complete:function(){s.hide()},success:function(e){e.success&&(a.prop("src",e.data.fav),o.val(""))}})})}),jQuery(window.document).ready(function(e){jQuery(".simple-option-media .image-reset").on("click",function(t){var i=e(this).closest(".simple-option-media");e(".image-preview",i).removeAttr("src"),e(".attachment-id",i).removeAttr("value"),e(this).addClass("disabled")}),jQuery(".simple-option-media .button-select-image").on("click",function(t){var i,n=e(this).closest(".simple-option-media"),a=e(".attachment-id",n).val();if(t.preventDefault(),i)return i.uploader.uploader.param("post_id",a),void i.open();wp.media.model.settings.post.id=a,(i=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var t=i.state().get("selection").first().toJSON();e(".image-preview",n).attr("src",t.url).css("width","auto"),e(".attachment-id",n).val(t.id),e(".image-reset",n).removeClass("disabled"),wp.media.model.settings.post.id=void 0}),i.open()}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=wp_media_post_id})}),jQuery(window.document).ready(function(){"use strict";null!==window.ub_admin.current_menu_sub_item&&(jQuery("#adminmenu .wp-submenu li.current").removeClass("current"),jQuery('a[href="admin.php?page=branding&tab='+window.ub_admin.current_menu_sub_item+'"]').parent().addClass("current"))}),jQuery(window.document).ready(function(e){"use strict";e.fn.slider&&e(".simple-option div.ui-slider").each(function(){var t=e(this).data("target-id");if(t){var i=e("#"+t),n=i.val(),a=e(this).data("max")||100,o=e(this).data("min")||0;e(this).slider({value:n,min:o,max:a,slide:function(e,t){i.val(t.value)}})}}),e(".simple-option-reset-section a").on("click",function(){var t={action:"simple_option",tab:e("#ub-tab").val(),nonce:e(this).data("nonce"),network:e(this).data("network"),section:e(this).data("section")};return window.confirm(e(this).data("question"))&&jQuery.post(ajaxurl,t,function(e){e.success&&(window.location.href=e.data.redirect)}),!1})}),jQuery(window.document).ready(function(){"use strict";if(jQuery.fn.switchButton){var e=function(){jQuery(".simple-option .master-field").each(function(){var e=jQuery(this).data("slave");if(e){var t=jQuery(".simple-option."+e);jQuery(".switch-button-background",jQuery(this).closest("td")).hasClass("checked")?t.show():t.hide()}})};jQuery(".simple-option .switch-button").each(function(){var t={checked:jQuery(this).checked,on_label:jQuery(this).data("on")||switch_button.labels.label_on,off_label:jQuery(this).data("off")||switch_button.labels.label_off,on_callback:e,off_callback:e};jQuery(this).switchButton(t)})}}),jQuery(window.document).ready(function(){jQuery("button.handlediv.button-link, .hndle",jQuery(".simple-options, .ultimate-colors")).on("click",function(e){e.preventDefault();var t=jQuery(this).parent(),i=jQuery(this).closest("form");t.toggleClass("closed"),jQuery.post(ajaxurl,{action:"simple_option",close:t.hasClass("closed"),target:t.attr("id"),nonce:jQuery("[name=postboxes_nonce]",i).val(),tab:jQuery("[name=tab]",i).val()})})}),jQuery(window.document).ready(function(e){e(".simple-options .postbox.section-is-slave").each(function(){var t=e(this),i=t.data("master-section"),n=t.data("master-field"),a=t.data("master-value");e('[name="simple_options['+i+"]["+n+']"]').on("change",function(){e(this).val()===a?t.show():t.hide()})})}),jQuery(window.document).ready(function(e){jQuery.fn.select2&&(e(".ub-select2").select2(),e(".ub-select2-ajax").select2({ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(t){return{user_id:e(this).data("user-id"),_wpnonce:e(this).data("nonce"),action:e(this).data("action"),page:t.page,q:t.term}},processResults:function(e,t){return t.page=t.page||1,{results:e.data,pagination:{more:30*t.page<e.total_count}}},cache:!0},minimumInputLength:1,escapeMarkup:function(e){return e},templateResult:function(e){if(e.loading)return e.text;var t="<div class='select2-result-site clearfix'>";return t+="<div class='select2-result-site__blogname'>"+e.blogname+"</div>",t+="<div class='select2-result-site__siteurl'>"+e.siteurl+"</div>",t+="</div>"},templateSelection:function(e){return e.blog_id}}))});